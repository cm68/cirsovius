<html>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKCHAR/DISKCHAR.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:29 GMT -->
<head><title>Routinen f&uuml;r zeichenweise Diskettenoperationen</title></head>

<body  background="../../code.gif">

<div align="center">
<h1>Routinen f&uuml;r zeichenweise Diskettenoperationen</h1>

<table width="90%" border="1" cellpadding="5">
<tr><td bgcolor="#26D9FF">

Die hier vorgestellten Routinen sind solche f&uuml;r zur Zeichen Ein-/Ausgabe bei Diskettenoperationen.
Die BDOS-Schnittstelle ist in einem f&uuml;nf Byte gro&szlig;en Parameterblock abgelegt (Siehe dazu die Module DSKGET und DSKPUT).
Werden mehr als eine Datei bearbeitet, m&uuml;ssen diese Bytes jeweils umgepackt werden.
Weil dies etwas umständlich ist, habe ich noch andere Routinen geschrieben.

<table>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td valign="top" colspan="2">Modul-<i>Entry</i></td>
  <td valign="top" colspan="2"><b>B:</b> Beschreibung, <b>I:</b> Eingabe-, <b>O:</b> Ausgabeparameter</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="DSKGET-MAC.txt">DSKGET.MAC</a></td>
</tr>
<tr>
  <td valign="top">DSKGET</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Bytes von Diskette</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">RDBUF</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">16 Bit DMA Puffer Adresse</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">RDBFP</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">8 Bit relative Pufferzeiger</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">RDFCB</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">16 Bit FCB Adresse</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Die drei Felder m&uuml;ssen vor Aufruf gesetzt sein, falls nicht die Voreinstellungen verwendet werden sollen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls alle Rekords gelesen wurden oder die Datei nicht gefunden wurde. Sonst hält der Akku das gelesene Byte</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="DSKPUT-MAC.txt">DSKPUT.MAC</a></td>
</tr>
<tr>
  <td valign="top">DSKPUT</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">Schreiben eines Bytes auf Diskette</td>
</tr>
<tr>
  <td valign="top">@WRREC</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">Setzt DMA Puffer vor Schreiben eines Rekords</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">WRBUF</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">16 Bit DMA Puffer Adresse</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">WRBFP</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">8 Bit relative Pufferzeiger</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">WRFCB</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">16 Bit FCB Adresse</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Die drei Felder m&uuml;ssen vor Aufruf gesetzt werden, falls nicht die Voreinstellungen verwendet werden sollen. Der Akku hält das Byte, das geschrieben werden soll</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt, wenn kein Platz mehr auf der Diskette vorhanden ist oder die Datei nicht gefunden wurde</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="GETEOF-MAC.txt">GETEOF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">GETEOF</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Zeichens von Diskette, testen des Dateiendes</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag zeigt das Ende der Datei an, entweder physikalisch oder beim Zeichen EOF (Hex 1A - Ctrl-Z). Der Akku hält gelesenes Zeichen</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="PUTEOF-MAC.txt">PUTEOF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">PUTEOF</td>
  <td valign="top">B:</td>
  <td valign="top">Schreiben des Endes einer Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls kein Platz mehr auf Diskette ist oder die Datei nicht gefunden wurde, sonst nicht gesetzt. Der letzte Rekord der Datei wird auf Diskette geschrieben (Rest mit Ctrl-Z aufgef&uuml;llt). Ist in Adresse PUTEOF-1 das Bit 0 gesetzt, so wird zuvor noch ein EOF (Hex 1A - Ctrl-Z) geschrieben.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="DSKUGT-MAC.txt">DSKUGT.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">DSKUGT</td>
  <td valign="top">B:</td>
  <td valign="top">R&uuml;ckschreiben eines gelesenen Zeichens</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag zeigt Fehler an.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CLOSEF-MAC.txt">CLOSEF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CLOSEF</td>
  <td valign="top">B:</td>
  <td valign="top">Beenden und Schlie&szlig;en einer ge&ouml;ffneten Ausgabe Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls Datei nicht geschlossen werden konnte, sonst nicht gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
</table>

</td></tr></table>
</div>

</body>


<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKCHAR/DISKCHAR.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:29 GMT -->
</html>

