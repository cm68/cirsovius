<html>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKBASE/DISKBASE.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:28 GMT -->
<head><title>Routinen f&uuml;r Diskettenoperationen</title></head>

<body  background="../../code.gif">

<div align="center">
<h1>Routinen f&uuml;r Diskettenoperationen</h1>

<table width="90%" border="1" cellpadding="5">
<tr><td bgcolor="#26D9FF">

Die hier vorgestellten Routinen sind solche f&uuml;r die Verabeitung von grundlegenden Diskoperationen.
Dies umfasst Parse-Routinen sowie Schnittstellen direkt zum BDOS.
Die I/O Operationen sind Rekord-basiert:

<table>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td valign="top" colspan="2">Modul-<i>Entry</i></td>
  <td valign="top" colspan="2"><b>B:</b> Beschreibung, <b>I:</b> Eingabe-, <b>O:</b> Ausgabeparameter</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="BDOS-MAC.txt">BDOS.MAC</a></td>
</tr>
<tr>
  <td valign="top">@BDOS</td>
  <td valign="top">IORES</td>
  <td valign="top">B:</td>
  <td valign="top">Ausf&uuml;hren eines BDOS Aufrufes f&uuml;r Diskettenoperationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf einen FCB, der Akku h&auml;lt die auszuf&uuml;hrende BDOS Funktion</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Das Ergebnisfeld IORES h&auml;lt den Inhalt des Akkus, IORES+1 das Register H und IORES+2 die BDOS Funktion</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FILCHK-MAC.txt">FILCHK.MAC</a></td>
</tr>
<tr>
  <td valign="top">FILCHK</td>
  <td valign="top">@FILCK</td>
  <td valign="top">B:</td>
  <td valign="top">Testen der CP/M Parameter nach Aufruf eines Programmes</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Bei Aufruf von FILCHK muss der Standard File Control Block (FCB) legale Dateiparameter beinhalten. Bei Aufruf von @FILCK weist Registerpaar DE auf ein FCB. Registerpaar HL zeigt auf eine Liste mit zwei Adressen, die im Fehlerfall geladen werden.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist nicht gesetzt, wenn in der FCB ein legaler Dateiname vorhanden ist. Dann h&auml;lt das Registerpaar DE die Adresse der FCB. Die Carryflag ist gesetzt, wenn ein illegaler oder leerer Dateiname gefunden wurde, dabei h&auml;lt Registerpaar DE die erste Adresse aus der Liste, wenn kein Dateiname gefunden wurde, und die zweite Adresse, wenn der Dateiname fehlerhaft ist.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="WCARD-MAC.txt">WCARD.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">WCARD</td>
  <td valign="top">B:</td>
  <td valign="top">Testen ob Wild Card Zeichen (&#132;?") in FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Zeroflag gesetzt bei &#132;?" im FCB</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="SETDMA-MAC.txt">SETDMA.MAC</a>, <a href="SETBUF-MAC.txt">(SETBUF.MAC)</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">SETDMA</td>
  <td valign="top">B:</td>
  <td valign="top">Setzen eines neuen DMA Puffers</td>
</tr>
<tr>
  <td valign="top" colspan="2">(<i>alt: SETBUF</i>)</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse eines neuen 128 Byte Puffers</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">---</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CURDMA-MAC.txt">CURDMA.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CURDMA</td>
  <td valign="top">B:</td>
  <td valign="top">Holen des aktuellen DMA Puffers</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Registerpaar HL h&auml;lt Adresse des aktuellen DMA Puffers</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="PARSE-MAC.txt">PARSE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">PARSE</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in FCB Format</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf die Adresse eines Parseblocks mit:
<ul>
<li>Die erste Adresse zeigt auf einen Zeichenpuffer</li>
<li>Die zweite Adresse zeigt auf den FCB</li>
</ul>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei normalem Ende ist die Carryflag nicht gesetzt und das Registerpaar HL zeigt auf den n&auml;chsten zu untersuchenden Teil der Zeichenkette oder, falls das Ende erreicht ist, enth&auml;lt es Null. Im Fehlerfall ist Carry gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="PARSE22-MAC.txt">PARSE22.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">PARSE</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in FCB Format. <b>Diese Routine ist speziell f&uuml;r CP/M 2.2 Anwender gedacht.</b></td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf die Adresse eines Parseblocks mit:
<ul>
<li>Die erste Adresse zeigt auf einen Zeichenpuffer</li>
<li>Die zweite Adresse zeigt auf den FCB</li>
</ul>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei normalem Ende ist die Carryflag nicht gesetzt und das Registerpaar HL zeigt auf den n&auml;chsten zu untersuchenden Teil der Zeichenkette oder, falls das Ende erreicht ist, enth&auml;lt es Null. Im Fehlerfall ist Carry gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FPARSE-MAC.txt">FPARSE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">FPARSE</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in FCB Format</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf die Adresse eines Parseblocks mit:
<ul>
<li>Die erste Adresse zeigt auf einen Zeichenpuffer</li>
<li>Die zweite Adresse zeigt auf den FCB</li>
</ul>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei normalem Ende ist die Carryflag nicht gesetzt und das Registerpaar HL zeigt auf den n&auml;chsten zu untersuchenden Teil der Zeichenkette oder, falls das Ende erreicht ist, enth&auml;lt es Null. Im Fehlerfall ist Carry gesetzt. Der Akku h&auml;lt 0, wenn kein Punkt in der Zeichenkette gefunden wurde. Akku h&auml;lt 1, wenn ein Punkt gefunden wurde</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="XPARSE-MAC.txt">XPARSE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">XPARSE</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in FCB Format</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf die Adresse eines Parseblocks mit:
<ul>
<li>Die erste Adresse zeigt auf einen Zeichenpuffer</li>
<li>Die zweite Adresse zeigt auf den FCB</li>
</ul>
Registerpaar HL zeigt auf eine Liste von Zeichen, die neben den Standardzeichen das Endzeichen des Puffers f&uuml;r die Wandlung angeben. Das erste Byte in der Liste gibt die L&auml;nge der folgenden Zeichen an
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei normalem Ende ist die Carryflag nicht gesetzt und das Registerpaar HL zeigt auf den n&auml;chsten zu untersuchenden Teil der Zeichenkette oder, falls das Ende erreicht ist, enth&auml;lt es Null. Im Fehlerfall ist Carry gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="XFPARS-MAC.txt">XFPARS.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">XFPARS</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in FCB Format</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf die Adresse eines Parseblocks mit:
<ul>
<li>Die erste Adresse zeigt auf einen Zeichenpuffer</li>
<li>Die zweite Adresse zeigt auf den FCB</li>
</ul>
Registerpaar HL zeigt auf eine Liste von Zeichen, die neben den Standardzeichen das Endzeichen des Puffers f&uuml;r die Wandlung angeben. Das erste Byte in der Liste gibt die L&auml;nge der folgenden Zeichen an
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei normalem Ende ist die Carryflag nicht gesetzt und das Registerpaar HL zeigt auf den n&auml;chsten zu untersuchenden Teil der Zeichenkette oder, falls das Ende erreicht ist, enth&auml;lt es Null. Im Fehlerfall ist Carry gesetzt. Der Akku h&auml;lt 0, wenn kein Punkt in der Zeichenkette gefunden wurde. Akku h&auml;lt 1, wenn ein Punkt gefunden wurde</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="PRSCHK-MAC.txt">PRSCHK.MAC</a></td>
</tr>
<tr>
  <td valign="top">$PRDEL</td>
  <td valign="top">$PRPTR</td>
  <td valign="top">B:</td>
  <td valign="top">Hilfsroutinen f&uuml;r XPARSE und XFPRSE</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="GETDU-MAC.txt">GETDU.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">GETDU</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in Laufwerk mit optionaler Angabe des Nutzerbereiches. Diese Routine sollte vor einer der PARSE Routinen aufgerufen werden.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar HL zeigt auf die Zeichenkette, die mit einem Doppelpunkt abgeschlossen sein muss.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Register B h&auml;lt das Laufwerk und Register C h&auml;lt den Nutzer. Register E zeigt an, ob ein Laufwerk und/oder Nutzer definiert wurde. Falls nicht, so stehen in den Registern die gerade eingestellten Werte.
<ul>
<li>Bit 0 : Gesetzt bei Eingabe eines Laufwerkes</li>
<li>Bit 1 : Gesetzt bei Eingabe eines Nutzers</li>
</ul>
Im Fehlerfall ist Carry gesetzt. Wenn kein Fehler vorliegt, dann zeigt das Registerpaar HL hinter das Zeichen &#132;:" oder bleibt unver&auml;ndert.
</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="GETDEV-MAC.txt">GETDEV.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">GETDEV</td>
  <td valign="top">B:</td>
  <td valign="top">Umwandeln einer Zeichenkette in ein Ger&auml;t. Diese Routine sollte <span style="text-decoration:underline">vor</span> einer der PARSE (und GETDU) Routinen aufgerufen werden</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar HL zeigt auf die Zeichenkette, die mit einem Doppelpunkt abgeschlossen sein muss. Optional zeigt Registerpaar DE auf eine Erweiterungstabelle, andernfalls h&auml;lt das Registerpaar Null. Die Tabelle muss aus Elementen von je drei Zeichen bestehen (ohne Doppelpunkt), abgeschlossen mit Null.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Register C h&auml;lt den Wert des Ger&auml;tes:
<table>
<tr><td>0:</td><td>NUL:</td></tr>
<tr><td>1:</td><td>CON:</td></tr>
<tr><td>2:</td><td>AUX:</td></tr>
<tr><td>3:</td><td>LST:</td></tr>
<tr><td>4+x:</td><td>Aus Erweiterung (x=0, 1, usw.)</td></tr>
</table>
Carry ist gesetzt, wenn kein Ger&auml;t gefunden wurde. Die Registerpaare HL und DE bleiben unver&auml;ndert.
</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="SETERR-MAC.txt">SETERR.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">SETERR</td>
  <td valign="top">B:</td>
  <td valign="top">Einstellen eines Fehlermodus</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Der Akku h&auml;lt den Fehlermodus. Dieser kann gew&auml;hlt werden aus:
<table>
<tr><td>00H</td><td>-></td><td>Warmstart bei Fehler</td></tr>
<tr><td>01H..FDH</td><td>-></td><td>Fehler ausgeben, dann Warmstart</td></tr>
<tr><td>FEH</td><td>-></td><td>Fehler anzeigen, Extended Mode</td></tr>
<tr><td>FFH</td><td>-></td><td>Nur Extended Mode</td></tr>
</table>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Fehlermodus eingestellt</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="GETERR-MAC.txt">GETERR.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">GETERR</td>
  <td valign="top">B:</td>
  <td valign="top">Ermitteln des eingestellten Fehlermodus</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Der Akku h&auml;lt den Fehlermodus:
<table>
<tr><td>00H</td><td>-></td><td>Warmstart bei Fehler</td></tr>
<tr><td>01H..FDH</td><td>-></td><td>Fehler ausgeben, dann Warmstart</td></tr>
<tr><td>FEH</td><td>-></td><td>Fehler anzeigen, Extended Mode</td></tr>
<tr><td>FFH</td><td>-></td><td>Nur Extended Mode</td></tr>
</table>
</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="ERROR-MAC.txt">ERROR.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@ERROR</td>
  <td valign="top">B:</td>
  <td valign="top">&Uuml;berpr&uuml;fen von Fehlern bei Diskettenoperationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Gesetzte Carryflag zeigt Fehler an.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Im Fehlerfall wird gepr&uuml;ft, ob Extended Mode eingestellt ist. Falls ja, dann wird getestet, ob im Feld ERRPC (siehe n&auml;chstes Modul) eine Adresse ungleich Null steht. Falls ja, verzweigt das Modul auf diese Adresse, andernfalls R&uuml;ckkehr mit gesetzter Carryflag. Der Akku h&auml;lt den Originalwert vom Register H</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="ERRLNK-MAC.txt">ERRLNK.MAC</a></td>
</tr>
<tr>
  <td valign="top">@ERCOD</td>
  <td valign="top">ERRPC</td>
  <td valign="top">B:</td>
  <td valign="top">Datenfelder zur &Uuml;berpr&uuml;fung von Fehlern bei Diskettenoperationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Der Extended Mode steht in @ERCOD. Im Feld ERRPC steht eine optionale Adresse.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="ERRIDX-MAC.txt">ERRIDX.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">ERRIDX</td>
  <td valign="top">B:</td>
  <td valign="top">Wandeln von Fehlercodes in Indizes</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Feld IORES aus Modul @BDOS ist gef&uuml;llt mit Standard und IORES+1 mit erweitertem Code</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Registerpaar DE h&auml;lt Index. Die Zeroflag ist gesetzt, wenn kein Fehler vorliegt.<br />
<b>Indizes f&uuml;r erweiterten Fehlercode (IORES = -1)</b>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top" colspan="2">
<table>
<tr><td valign="top"><u>Registerpaar DE</u></td><td valign="top"><u>IORES+1</u></td><td valign="top"><u>Bedeutung</u></td></tr>
<tr><td valign="top">0</td><td valign="top">0</td><td valign="top">Kein Fehler</td></tr>
<tr><td valign="top">2</td><td valign="top">1</td><td valign="top">Disk I/O Fehler</td></tr>
<tr><td valign="top">4</td><td valign="top">2</td><td valign="top">Read Only Disk</td></tr>
<tr><td valign="top">6</td><td valign="top">3</td><td valign="top">Read Only Datei</td></tr>
<tr><td valign="top">8</td><td valign="top">4</td><td valign="top">Drive Fehler</td></tr>
<tr><td valign="top">10</td><td valign="top">7</td><td valign="top">Datei Passwort Fehler</td></tr>
<tr><td valign="top">12</td><td valign="top">8</td><td valign="top">Datei existiert bereits</td></tr>
<tr><td valign="top">14</td><td valign="top">9</td><td valign="top">FCB beinhaltet Wildcard (?)</td></tr>
</table>
</td>
</tr>
<tr>
  <td valign="top" colspan="3">&nbsp;</td>
  <td valign="top">
<b>Indizes f&uuml;r Standard Fehlercode</b>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top" colspan="2">
<table>
<tr><td valign="top"><u>Registerpaar DE</u></td><td valign="top"><u>IORES</u></td><td valign="top"><u>Bedeutung</u></td></tr>
<tr><td valign="top">16</td><td valign="top">1</td><td valign="top">Ende der Datei oder kein Platz auf der Disk</td></tr>
<tr><td valign="top">18</td><td valign="top">2</td><td valign="top">Keine Datenbl&ouml;cke frei</td></tr>
<tr><td valign="top">20</td><td valign="top">3</td><td valign="top">Extent kann nicht geschlossen werden</td></tr>
<tr><td valign="top">22</td><td valign="top">4</td><td valign="top">Suche in unbeschriebenem Extent</td></tr>
<tr><td valign="top">24</td><td valign="top">5</td><td valign="top">Directory voll</td></tr>
<tr><td valign="top">26</td><td valign="top">6</td><td valign="top">Random Rekord Nummer zu gro&szlig;</td></tr>
<tr><td valign="top">28</td><td valign="top">9</td><td valign="top">Ung&uuml;ltiger FCB</td></tr>
<tr><td valign="top">30</td><td valign="top">10</td><td valign="top">Disk wurde gewechselt</td></tr>
</table>
</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="PHYSID-MAC.txt">PHYSID.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">PHYSID</td>
  <td valign="top">B:</td>
  <td valign="top">Testen ob gew&auml;hltes Laufwerk vorhanden ist</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt die Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt bei nicht vorhandenem Laufwerk, sonst nicht gesetzt</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="OPEN-MAC.txt">OPEN.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">OPEN</td>
  <td valign="top">B:</td>
  <td valign="top">&Ouml;ffnen einer existierenden Datei.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt die Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, wenn die Datei nicht gefunden wurde, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich. Extent und Aktueller Rekord werden auf 0 gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CREATE-MAC.txt">CREATE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CREATE</td>
  <td valign="top">B:</td>
  <td valign="top">Erzeugen einer neuen Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, falls kein neue Directory Eintrag erfolgen kann (Diskette voll oder Datei schon vorhanden), sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CREATC-MAC.txt">CREATC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CREATC</td>
  <td valign="top">B:</td>
  <td valign="top">Erzeugen einer neuen Datei, falls Datei nicht schon vorhanden</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse der FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">	Carryflag ist gesetzt, falls kein Platz auf Diskette oder falls die Datei schon vorhanden ist, sonst nicht gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CREATD-MAC.txt">CREATD.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CREATD</td>
  <td valign="top">B:</td>
  <td valign="top">Erzeugen einer neuen Datei, L&ouml;schen einer vorhandenen Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse der FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, falls kein Platz auf Diskette ist, sonst nicht gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="TRNCAT-MAC.txt">TRNCAT.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">TRNCAT</td>
  <td valign="top">B:</td>
  <td valign="top">Vorhandene Dateigr&ouml;&szlig;e verkleinern</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse der FCB, in der der Random Rekord Zeiger auf den letzten neuen Rekord der Datei eingestellt sein muss</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, falls die Datei nicht vorhanden ist oder die gew&auml;hlte Rekordnummer gr&ouml;&szlig;er ist als die gr&ouml;&szlig;te Rekordnummer der Datei. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FILEOP-MAC.txt">FILEOP.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@FILOP</td>
  <td valign="top">B:</td>
  <td valign="top">Ausf&uuml;hrung spezieller Diskettenfunktionen.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB. Der Akku h&auml;lt die auszuf&uuml;hrende BDOS Funktion (z.B. OPEN)</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Extension und der Current Rekord im FCB werden auf Null gesetzt. Die Carryflag wird bei fehlerhafter Operation gesetzt und Akku h&auml;lt Extended Mode Fehlerkode</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FILECL-MAC.txt">FILECL.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@FILCL</td>
  <td valign="top">B:</td>
  <td valign="top">Ausf&uuml;hrung spezieller Diskettenfunktionen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse des FCB. Der Akku h&auml;lt die auszuf&uuml;hrende BDOS Funktion (z.B. CLOSE)</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei fehlerhafter BDOS Funktion wird die Carryflag gesetzt (Abbildung MSB des Fehlercodes), sonst nicht. Der Akku h&auml;lt Extended Mode Fehlerkode</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="OPNAPP-MAC.txt">OPNAPP.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">OPNAPP</td>
  <td valign="top">B:</td>
  <td valign="top">&Ouml;ffnen einer vorhandenen Datei, Vorbereitung f&uuml;r Append (Anh&auml;ngen neuer Daten an das Dateiende)</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Bei erfolgreichem &Ouml;ffnen h&auml;lt der Akku einen relativen Rekordzeiger 0..128 und die Carryflag ist nicht gesetzt, sonst ja. <b>Der Aufrufer muss f&uuml;r die Einstellung des Disk Puffers sorgen.</b></td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="REOPEN-MAC.txt">REOPEN.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">REOPEN</td>
  <td valign="top">B:</td>
  <td valign="top">&Ouml;ffnen einer existierenden Datei.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt die Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, wenn die Datei mit der gew&auml;hlten Extent oder Rekordnummer nicht gefunden wurde, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich. Extent und Aktueller Rekord werden &uuml;bernommen.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="SETOPN-MAC.txt">SETOPN.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">SETOPN</td>
  <td valign="top">B:</td>
  <td valign="top">&Ouml;ffnen einer existierenden Datei.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar DE h&auml;lt die Adresse des FCB, Register L h&auml;lt die Extent Nummer und Register H h&auml;lt die aktuelle Rekordnummer</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt, wenn die Datei mit der gew&auml;hlten Extent oder Rekordnummer nicht gefunden wurde, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CLOSE-MAC.txt">CLOSE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CLOSE</td>
  <td valign="top">B:</td>
  <td valign="top">Schlie&szlig;en einer ge&ouml;ffneten Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls Datei nicht gefunden wurde, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="DELETE-MAC.txt">DELETE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">DELETE</td>
  <td valign="top">B:</td>
  <td valign="top">L&ouml;schen einer vorhandenen Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag ist gesetzt falls Datei nicht vorhanden, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RENAME-MAC.txt">RENAME.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RENAME</td>
  <td valign="top">B:</td>
  <td valign="top">Umbenennen einer Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls alte Datei nicht vorhanden oder neue Datei schon auf Diskette, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RENAMC-MAC.txt">RENAMC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RENAMC</td>
  <td valign="top">B:</td>
  <td valign="top">Umbenennen einer Datei falls neuer Dateiname unbekannt</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls alte Datei nicht vorhanden oder neue Datei schon auf Diskette, sonst nicht gesetzt. Im Extended Mode Verzweigung auf Fehlerroutine m&ouml;glich</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RENAMF-MAC.txt">RENAMF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RENAMF</td>
  <td valign="top">B:</td>
  <td valign="top">Umbenennen einer Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt FCB der alten Datei und Registerpaar HL weist auf den neuen Namen.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Siehe Modul RENAME</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RENAMI-MAC.txt">RENAMI.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RENAMI</td>
  <td valign="top">B:</td>
  <td valign="top">Umbenennen einer Datei falls neuer Dateiname unbekannt</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt FCB der alten Datei und Registerpaar HL weist auf den neuen Namen.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Siehe Modul RENAMC</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="SETRND-MAC.txt">SETRND.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">SETRND</td>
  <td valign="top">B:</td>
  <td valign="top">Ermitteln der Random Rekord Zahl (RRN) aus einem FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse der ge&ouml;ffneten FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Registerpaar HL h&auml;lt niederwertigen Teil der RRN, Akku h&auml;lt h&ouml;chstweriges Byte. Die Zeroflag ist gesetzt, wenn Akku Null ist.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FTELL-MAC.txt">FTELL.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">FTELL</td>
  <td valign="top">B:</td>
  <td valign="top">Dateipositon f&uuml;r n&auml;chstes sequentielles Lesen bestimmen.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse der ge&ouml;ffneten FCB</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Registerpaar HL h&auml;lt niederwertigen Teil der RRN, Akku h&auml;lt h&ouml;chstwertiges Byte.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FSEEK-MAC.txt">FSEEK.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">FSEEK</td>
  <td valign="top">B:</td>
  <td valign="top">Datei f&uuml;r n&auml;chstes sequentielles Lesen positionieren.</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse der ge&ouml;ffneten FCB. Registerpaar HL h&auml;lt niederwertigen Teil der RRN, Akku h&auml;lt h&ouml;chstwertiges Byte. Ist in Adresse FSEEK-1 das Bit 0 gesetzt, so wird die RRN um 1 erh&ouml;ht (durch sequentielles Lesen).</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls Datei nicht gefunden oder vollst&auml;ndig gelesen wurde, sonst nicht gesetzt. <b>Der Aufrufer muss f&uuml;r die Einstellung des Disk Puffers sorgen.</b></td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
</table>

</td></tr></table>
</div>

</body>


<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKBASE/DISKBASE.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:28 GMT -->
</html>

