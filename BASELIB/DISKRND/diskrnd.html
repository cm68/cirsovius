<html>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKRND/DISKRND.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:30 GMT -->
<head><title>Routinen zum Arbeiten mit Rekords</title></head>

<body  background="../../code.gif">

<div align="center">
<h1>Routinen zum Arbeiten mit Rekords</h1>

<table width="90%" border="1" cellpadding="5">
<tr><td bgcolor="#26D9FF">

Die hier vorgestellten Routinen sind solche f&uuml;r zur Rekord Ein-/Ausgabe mit variabler L&auml;nge bei Diskettenoperationen.
Einige Hinweise zu den Routinen finden sich <a href="../Rand.html">hier</a>.

<table>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td valign="top" colspan="2">Modul-<i>Entry</i></td>
  <td valign="top" colspan="2"><b>B:</b> Beschreibung, <b>I:</b> Eingabe-, <b>O:</b> Ausgabeparameter</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CRERND-MAC.txt">CRERND.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">CRERND</td>
  <td valign="top">B:</td>
  <td valign="top">Erstellen einer Leerdatei mit Rekords variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku h&auml;lt L&auml;nge des Rekords im Bereich 1..255
<br />Registerpaar BC h&auml;lt Rekordnummer im Bereich 1..65535
<br />Registerpaar DE h&auml;lt Adresse der FCB
<br />Registerpaar HL h&auml;lt Adresse eines DMA Puffers f&uuml;r die Einstellung eines Rekords
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls Datei schon vorhanden ist oder bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt. Die Datei ist zum Lesen ge&ouml;ffnet</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RDRNDR-MAC.txt">RDRNDR.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RDRNDR</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Rekords mit variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku h&auml;lt L&auml;nge des Rekords im Bereich 1..255
<br />Registerpaar BC h&auml;lt Rekordnummer im Bereich 1..65535
<br />Registerpaar DE h&auml;lt Adresse der FCB
<br />Registerpaar HL h&auml;lt Adresse eines Textpuffers f&uuml;r gelesenen Rekord
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt und Textpuffer gef&uuml;llt mit Zeichen</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="WRRNDR-MAC.txt">WRRNDR.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">WRRNDR</td>
  <td valign="top">B:</td>
  <td valign="top">Schreiben eines Rekords mit variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku h&auml;lt L&auml;nge des Rekords im Bereich 1..255
<br />Registerpaar BC h&auml;lt Rekordnummer im Bereich 1..65535
<br />Registerpaar DE h&auml;lt Adresse der FCB
<br />Registerpaar HL h&auml;lt Adresse eines Textpuffers f&uuml;r zu schreibenden Rekord
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt und Textpuffer auf Diskette geschrieben</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="ATTRND-MAC.txt">ATTRND.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">ATTRND</td>
  <td valign="top">B:</td>
  <td valign="top">Ver&auml;ndern der Gr&ouml;&szlig;e einer Datei mit Rekords variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku h&auml;lt L&auml;nge des Rekords im Bereich 1..255
<br />Registerpaar BC h&auml;lt neue Rekordnummer im Bereich 1..65535
<br />Registerpaar DE h&auml;lt Adresse der FCB
<br />Registerpaar HL h&auml;lt Adresse eines DMA Puffers f&uuml;r die Einstellung eines Rekords
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls Datei nicht vorhanden ist oder bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt. Die Datei ist zum Lesen ge&ouml;ffnet</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="CREREC-MAC.txt">CREREC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@RNDPR</td>
  <td valign="top">B:</td>
  <td valign="top">&Uuml;berpr&uuml;fen der Rekordwerte</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag zeigt Fehler an</td>
</tr>
<tr>
  <td valign="top" colspan="2">@BLREC</td>
  <td valign="top">B:</td>
  <td valign="top">Auff&uuml;llen eines Puffers mit 128 Leerzeichen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar HL h&auml;lt Adresse des Puffers</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">@OUTRC</td>
  <td valign="top">B:</td>
  <td valign="top">Ausgabe von Leerzeichen auf die Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt FCB und HL Puffer</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag zeigt Schreibfehler an</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="VARREC-MAC.txt">VARREC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@TSREC</td>
  <td valign="top">B:</td>
  <td valign="top">&Uuml;berpr&uuml;fung Rekordparameter</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt bei Parameter Null</td>
</tr>
<tr>
  <td valign="top" colspan="2">@GTPHS</td>
  <td valign="top">B:</td>
  <td valign="top">Wandeln variabler L&auml;ngen in feste 128 Bytes</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Register B h&auml;lt Rekordl&auml;nge, C relativen Zeiger</td>
</tr>
<tr>
  <td valign="top" colspan="2">@GTREC</td>
  <td valign="top">B:</td>
  <td valign="top">Random Rekord lesen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse der FCB und Register C h&auml;lt relativen Rekordzeiger</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt bei Dateifehler. Sonst h&auml;lt Registerpaar DE Startadresse innerhalb des Rekords</td>
</tr>
<tr>
  <td valign="top" colspan="2">@MVREC</td>
  <td valign="top">B:</td>
  <td valign="top">Rekord in/von Textpuffer kopieren</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Quelladresse, HL Zieladresse. Register B h&auml;lt Rekordl&auml;nge, C relativen Rekordzeiger</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Zeroflag ist gesetzt, wenn Rekord komplett kopiert wurde. Sonst wird Register C auf Null gesetzt</td>
</tr>
<tr>
  <td valign="top">@FXNXT</td>
  <td valign="top">@RNREC</td>
  <td valign="top">B:</td>
  <td valign="top">N&auml;chsten Random Rekord berechnen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">@RNREC h&auml;lt Adresse der laufenden Rekordnummer</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">---</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="INIREC-MAC.txt">INIREC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">INIREC</td>
  <td valign="top">B:</td>
  <td valign="top">Initialisieren einer Random Rekord Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf Parameter Block</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt und Diskette ist mit dem Inhalt des Datenpuffers initialisiert</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="FIXREC-MAC.txt">FIXREC.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">FIXREC</td>
  <td valign="top">B:</td>
  <td valign="top">Ver&auml;ndern der Gr&ouml;&szlig;e einer Datei mit Rekords variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf Parameter Block</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt und neue Rekords sind mit Inhalt des Datenpuffers auf Diskette geschrieben</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="RDRECF-MAC.txt">RDRECF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">RDRECF</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Rekords mit variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf Parameter Block</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekordparameterfehler, sonst nicht gesetzt und Datenpuffer gef&uuml;llt mit Rekord</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="WRRECF-MAC.txt">WRRECF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">WRRECF</td>
  <td valign="top">B:</td>
  <td valign="top">Schreiben eines Rekords mit variabler L&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf Parameter Block</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Disketten- oder Rekord-parameterfehler, sonst nicht gesetzt und Datenpuffer geschrieben auf Diskette</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="REC1-MAC.txt">REC1.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">$RNDPR</td>
  <td valign="top">B:</td>
  <td valign="top">&Uuml;berpr&uuml;fen der Rekordwerte</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformation</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag zeigt Fehler an</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="REC2-MAC.txt">REC2.MAC</a></td>
</tr>
<tr>
  <td valign="top">$FXNXT</td>
  <td valign="top">$RNREC</td>
  <td valign="top">B:</td>
  <td valign="top">N&auml;chsten Random Rekord berechnen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">$RNREC h&auml;lt Adresse der laufenden Rekordnummer</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">$GTPHS</td>
  <td valign="top">B:</td>
  <td valign="top">Wandel variabler L&auml;nge in feste 128 Bytes</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Register B h&auml;lt Rekordl&auml;nge, C relativen Zeiger</td>
</tr>
<tr>
  <td valign="top">$TSREC</td>
  <td valign="top">$RCLEN</td>
  <td valign="top">B:</td>
  <td valign="top">&Uuml;berpr&uuml;fung Rekordparameter</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carry gesetzt bei Parameter Null, $RCLEN h&auml;lt Rekordl&auml;nge</td>
</tr>
<tr>
  <td valign="top" colspan="2">$MVREC</td>
  <td valign="top">B:</td>
  <td valign="top">Rekord in/aus Datenpuffer kopieren</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Quelladresse, HL Zieladresse. Register B h&auml;lt Rekordl&auml;nge, C relativen Rekordzeiger</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Zeroflag ist gesetzt, wenn Rekord komplett kopiert wurde. Sonst wird Register C auf Null gesetzt</td>
</tr>
<tr>
  <td valign="top" colspan="2">$MLREC</td>
  <td valign="top">B:</td>
  <td valign="top">Logische Rekordnummer aus variabler Nummer berechnen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Akku und Registerpaar BC halten Rekordinformationen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Registerpaar HL h&auml;lt logischen Rekord, Akku h&auml;lt Offset innerhalb des Rekords</td>
</tr>
<tr>
  <td valign="top" colspan="2">$GTREC</td>
  <td valign="top">B:</td>
  <td valign="top">Random Rekord lesen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE h&auml;lt Adresse des FCB und Register C h&auml;lt relativen Rekordzeiger</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt bei Dateifehler. Sonst h&auml;lt Registerpaar DE Startadresse innerhalb des Rekords</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="REC3-MAC.txt">REC3.MAC</a></td>
</tr>
<tr>
  <td valign="top">$BUFSW</td>
  <td valign="top">$DMABF</td>
  <td valign="top">B:</td>
  <td valign="top">Setzen des DMA Puffers auf neuen Wert</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Register IY h&auml;lt Adresse des neuen Puffers</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">$DMABF h&auml;lt alte Adresse, neue Adresse eingestellt</td>
</tr>
<tr>
  <td valign="top" colspan="2">$BUFRS</td>
  <td valign="top">B:</td>
  <td valign="top">R&uuml;cksetzen des DMA Puffers auf alten Wert</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">$DMABF h&auml;lt alte Adresse</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Alte Adresse eingestellt</td>
</tr>
<tr>
  <td valign="top" colspan="2">$RNDRG</td>
  <td valign="top">B:</td>
  <td valign="top">Laden der Rekord Parameter in Register</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Registerpaar DE zeigt auf Parameterblock</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Register aus Parameterblock geladen</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
</table>

</td></tr></table>
</div>

</body>


<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKRND/DISKRND.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:30 GMT -->
</html>

