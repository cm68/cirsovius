<html>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/CLib.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:26 GMT -->
<head><title>Hinweise zu den C-Routinen</title></head>

<body style="margin-left:2cm"
      background="../perforation.gif">

<table width="475"><tr><td>
<h1 align="center">Hinweise zu den C-Routinen</h1>

<body background="../perforation.gif">

Hinweise zu den Routinen <i>FOPEN</i>, <i>FCLOSE</i>, <i>FGETC</i>, <i>FPUTC</i>, <i>FGETS</i> und <i>FPUTS</i>:
<p></p>
Diese Routinen arbeiten mit Adressen auf Dateikontrollbl&ouml;cke oder mit Ger&auml;tekodes.
Beides wird von der Routine FOPEN geliefert.
Diese Routine wandelt eine Zeichenkette der Form DU:FN.EXT oder DEV: um.
Es bedeuten:
<div style="margin-left:1cm">
<table>
<tr><td width="75pt">D</td><td>Laufwerk A..P</td></tr>
<tr><td>U</td><td>Benutzernummer 0..15</td></tr>
<tr><td>FN</td><td>Dateiname</td></tr>
<tr><td>EXT</td><td>Dateiextension</td></tr>
</table>
</div>
<p></p>
In diesem Fall wird ein dynamischer Speicherbereich angefordert und zur&uuml;ckgegeben.
Bei Aufruf von FCLOSE wird dieser Speicherbereich wieder freigegeben.
Er umfasst den Platz f&uuml;r den FCB (36 Bytes), vier Rekords (512 Bytes) und internen Speicher (6 Bytes = 554 Bytes).
<p></p>
Bei Dateien wird, in Abh&auml;ngigkeit vom gew&auml;hlten Modus, folgende Aktivit&auml;t ausgef&uuml;hrt:
<div style="margin-left:1cm">
<table>
<tr><td width="75pt" valign="top"><i>r, or</i></td><td>&Ouml;ffnen einer Datei zum Lesen. Ist die Datei nicht vorhanden, so wird ein Fehler zur&uuml;ckgegeben.</td></tr>
<tr><td valign="top"><i>w, ow</i></td><td>&Ouml;ffnen einer Datei zum Schreiben. Ist eine Datei vorhanden, so wird diese zuvor gel&ouml;scht.</td></tr>
<tr><td valign="top"><i>a</i></td><td>&Ouml;ffnen einer Datei zum Schreiben. Ist eine Datei vorhanden, so wird der Schreibzeiger auf das Ctrl-Z (End of file) positioniert, andernfalls wird eine neue Datei angelegt.</td></tr>
<tr><td valign="top"><i>oa</i></td><td>&Ouml;ffnen einer Datei zum Schreiben. Ist eine Datei vorhanden, so wird der Schreibzeiger hinter den letzten Rekord positioniert, andernfalls wird eine neue Datei angelegt.</td></tr>
</table>
</div>
<p></p>
F&uuml;r Ger&auml;te wird folgender Kode erzeugt:
<div style="margin-left:1cm">
<table>
<tr><td width="75pt"><i>CON:</i></td><td width="75pt"><i>w</i></td><td>3</td></tr>
<tr><td><i>RDR:</i></td><td><i>r</i></td><td>4</td></tr>
<tr><td><i>PUN:</i></td><td><i>w</i></td><td>5</td></tr>
<tr><td><i>LST:</i></td><td><i>w</i></td><td>6</td></tr>
<tr><td><i>CON:</i></td><td><i>r</i></td><td>7</td></tr>
<tr><td><i>NUL:</i></td><td><i>w</i></td><td>8</td></tr>
<tr><td><i>NUL:</i></td><td><i>r</i></td><td>9</td></tr>
</table>
</div>
<p></p>
Bei Aufruf der Routinen <i>FGETC</i> und <i>FGETS</i> kann als Ger&auml;tekode auch 1 gew&auml;hlt werden.
Dann wird die Datei oder das Ger&auml;t gew&auml;hlt, das in $STDIN definiert ist (Voreinstellung CON:).
Bei Aufruf von <i>FPUTC</i> und <i>FPUTS</i> ist Kode 2 erlaubt, es gilt die Definition in $STDOUT
(Voreinstellung ebenfalls CON:).
<br />
Ist der bin&auml;re Modus nicht gew&auml;hlt, so wird
<div style="margin-left:1cm">
bei der Eingabe die Folge &lt;CR&gt;&lt;LF&gt; zur&uuml;ckgegeben als &lt;LF&gt;<br />
bei der Ausgabe die Folge &lt;LF&gt; ausgegeben als &lt;CR&gt;&lt;LF&gt;
</div>
<p></p>
F&uuml;r die Ger&auml;te existiert das Kontrollbyte $FLAGS, dessen Bits wie folgt definiert sind
<div style="margin-left:1cm">
<table>
<tr><td width="75pt"><code>xxxxxx00</code></td><td>CON, gepufferte Eingabe</td></tr>
<tr><td><code>xxxxxx01</code></td><td>CON, ungepufferte Eingabe, &lt;CR&gt; wird als &lt;LF&gt; zur&uuml;ckgegeben</td></tr>
<tr><td><code>xxxxxx10</code></td><td>CON, ungepufferte Eingabe</td></tr>
<tr><td><code>xxxxxx11</code></td><td>CON, ungepufferte Eingabe, Zeichen wird nicht auf  Bildschirm ausgegeben</td></tr>
<tr><td><code>xxxxx1xx</code></td><td>CON, bin&auml;re Ausgabe</td></tr>
<tr><td><code>xxxx1xxx</code></td><td>RDR, bin&auml;re Eingabe</td></tr>
<tr><td><code>xxx1xxxx</code></td><td>PUN, bin&auml;re Ausgabe</td></tr>
</table>
</div>

</td></tr></table>

</body>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/CLib.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:26 GMT -->
</html>

