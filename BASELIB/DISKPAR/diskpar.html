<html>

<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKPAR/DISKPAR.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:29 GMT -->
<head><title>Routinen f&uuml;r zeichenweise Diskettenoperationen</title></head>

<body  background="../../code.gif">

<div align="center">
<h1>Routinen f&uuml;r zeichenweise Diskettenoperationen</h1>

<table width="90%" border="1" cellpadding="5">
<tr><td bgcolor="#26D9FF">

Die hier vorgestellten Routinen sind solche f&uuml;r zur Zeichen Ein-/Ausgabe bei Diskettenoperationen.
Die BDOS-Schnittstelle ist in einem sechs Byte gro&szlig;en Parameterblock abgelegt (Siehe dazu die Module UDSKGT und UDSKPT).
Gegen&uuml;ber den vorigen Routinen erlauben diese die flexiblere &Uuml;bergabe des Parameterblocks weil nun nur noch eine Adresse (zwei Bytes) getauscht werden muss.
Au&szlig;erdem wird die User Area unterst&uuml;tzt.

<table>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td valign="top" colspan="2">Modul-<i>Entry</i></td>
  <td valign="top" colspan="2"><b>B:</b> Beschreibung, <b>I:</b> Eingabe-, <b>O:</b> Ausgabeparameter</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UDSKGT-MAC.txt">UDSKGT.MAC</a></td>
</tr>
<tr>
  <td valign="top">UDSKGT</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Bytes von Diskette vom beliebigen Userbereich</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">RDPBLK</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">Zeiger auf einen sechs Byte Parameter Block:
<table>
<tr><td valign="top">PB+0,1</td><td valign="top">die 16 Bit DMA Puffer Adresse</td></tr>
<tr><td valign="top">PB+2</td><td valign="top">der 8 Bit relative Puffer Zeiger</td></tr>
<tr><td valign="top">PB+3,4</td><td valign="top">die 16 Bit FCB Adresse</td></tr>
<tr><td valign="top">PB+5</td><td valign="top">der Userbereich (-1 eingestellter)</td></tr>
</table>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Der Parameterblock muss gesetzt sein, falls nicht die Defaultwerte verwendet werden sollen</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls Datei nicht vorhanden ist oder keine Rekords mehr existieren, sonst nicht gesetzt und Akku h&auml;lt gelesenes Zeichen</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UDSKPT-MAC.txt">UDSKPT.MAC</a></td>
</tr>
<tr>
  <td valign="top">UDSKPT</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">Schreiben eines Bytes auf Diskette auf beliebigen Userbereich</td>
</tr>
<tr>
  <td valign="top">@WRMPX</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">B:</td>
  <td valign="top">DMA Puffer vor Rekordausgabe gesetzt</td>
</tr>
<tr>
  <td valign="top">&nbsp;</td>
  <td valign="top">WRPBLK</td>
  <td valign="top">&nbsp;</td>
  <td valign="top">Zeiger auf einen sechs Byte Parameter Block:
<table>
<tr><td valign="top">PB+0,1</td><td valign="top">die 16 Bit DMA Puffer Adresse</td></tr>
<tr><td valign="top">PB+2</td><td valign="top">der 8 Bit relative Puffer Zeiger</td></tr>
<tr><td valign="top">PB+3,4</td><td valign="top">die 16 Bit FCB Adresse</td></tr>
<tr><td valign="top">PB+5</td><td valign="top">der Userbereich (-1 eingestellter)</td></tr>
</table>
</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Der Parameterblock muss gesetzt sein falls nicht die Defaultwerte verwendet werden sollen und der Akku h&auml;lt das Zeichen, das auf die Diskette geschrieben werden soll</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls kein Platz mehr auf der Diskette ist oder die Datei nicht vorhanden ist, sonst nicht gesetzt</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UGTEOF-MAC.txt">UGTEOF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">UGTEOF</td>
  <td valign="top">B:</td>
  <td valign="top">Lesen eines Zeichens von Diskette vom beliebigen Benutzer, testen ob Dateiende</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei Ende der Datei, physikalisch oder beim Zeichen EOF (Hex 1A - Ctrl-Z)</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UPTEOF-MAC.txt">UPTEOF.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">UPTEOF</td>
  <td valign="top">B:</td>
  <td valign="top">Beenden einer Dateiausgabe auf beliebigem Userbereich</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt falls kein Platz mehr auf Diskette ist oder Datei nicht gefunden wurde, sonst nicht gesetzt. Der letzte Rekord wird mit Zeichen EOF gef&uuml;llt und auf Diskette geschrieben. Ist in Adresse UPTEOF-1 das Bit 0 gesetzt, so wird zuvor noch ein EOF (Hex 1A - Ctrl-Z) geschrieben.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UDSKUG-MAC.txt">UDSKUG.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">UDSKUG</td>
  <td valign="top">B:</td>
  <td valign="top">R&uuml;ckschreiben eines gelesenen Zeichens</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag zeigt Fehler an.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="UCLOSE-MAC.txt">UCLOSE.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">UCLOSE</td>
  <td valign="top">B:</td>
  <td valign="top">Beenden und Schlie&szlig;en einer geöffneten Ausgabe Datei</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">---</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Carryflag gesetzt falls Datei nicht geschlossen werden konnte, sonst nicht gesetzt.</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
<tr>
  <td colspan="4" align="center"><a href="COMDSK-MAC.txt">COMDSK.MAC</a></td>
</tr>
<tr>
  <td valign="top" colspan="2">@CMDSK</td>
  <td valign="top">B:</td>
  <td valign="top">Einstellen des DMA Puffers und Userbereiches bevor Diskettenoperation ausgef&uuml;hrt wird</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">I:</td>
  <td valign="top">Das Registerpaar HL h&auml;lt Adresse der auszuf&uuml;hrenden Funktion und Register IX h&auml;lt Adresse eines Parameterblocks</td>
</tr>
<tr>
  <td valign="top" colspan="2">&nbsp;</td>
  <td valign="top">O:</td>
  <td valign="top">Die Carryflag ist gesetzt bei &Uuml;bertragungsfehler, sonst nicht gesetzt</td>
</tr>
<tr><td colspan="4"><hr /></td></tr>
</table>

</td></tr></table>
</div>

</body>


<!-- Mirrored from www.cirsovius.de/CPM/Projekte/BASELIB/DISKPAR/DISKPAR.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Aug 2016 11:09:29 GMT -->
</html>

